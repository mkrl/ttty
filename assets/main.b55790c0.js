!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver((t=>{for(const e of t)if("childList"===e.type)for(const t of e.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&n(t)})).observe(document,{childList:!0,subtree:!0})}function n(t){if(t.ep)return;t.ep=!0;const n=function(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?n.credentials="include":"anonymous"===t.crossorigin?n.credentials="omit":n.credentials="same-origin",n}(t);fetch(t.href,n)}}();const t=(t,n,e)=>{const s=document.createElement(t);return n&&(s.className=n),e&&(s.innerHTML=e),s},n=(t,n=!1)=>{t.input.readOnly=!n,t.inputContainer.style.opacity=n?"":"0"};var e,s;(s=e||(e={})).ON_COMMAND="onCommand",s.ON_COMMAND_NOT_FOUND="onCommand404",s.ON_PROCESS_START="onProcessStart",s.ON_PROCESS_END="onProcessStop",s.ON_PROCESS_INTERRUPT="onProcessInterrupt",s.ON_INIT="onInit";const o=(t,n,e)=>{const s=new CustomEvent(t,{detail:e});n.dispatchEvent(s)},i=(t,n)=>{const{print:s}=n,i=t.split(" "),r=i[0],a=i.slice(1),c=n.settings.commands[r];c?c.argDescriptions&&c.argDescriptions.length>0&&0===a.length?s(`Usage: ${r} ${c.argDescriptions.map((t=>`[${t}]`)).join(" ")}`):(c.func(n,...a),o(e.ON_COMMAND,n.settings.host,t)):(s(`<span class="terminal-error">command not found: ${r}</span>`),o(e.ON_COMMAND_NOT_FOUND,n.settings.host,t))},r=t=>{const{settings:{host:s}}=t;n(t),t.isProcessRunning=!0,o(e.ON_PROCESS_START,s)},a=t=>{const{input:s,settings:{host:i}}=t;n(t,!0),t.isProcessRunning=!1,s.focus(),o(e.ON_PROCESS_END,i)},c=(t,n)=>{const{history:e,lastHistoryIndex:s}=t,o=e.length-1;let i;n&&0===s||(i=n?s-1:s===o?0:s+1,t.input.value=e[n?i:s],t.lastHistoryIndex=i)};const l=document.querySelector("main"),m=(({host:n,welcomeMessage:s,prompt:l="$: ",historyLength:m=50,enableHelp:p=!0,commands:u})=>{const d={host:n,welcomeMessage:s,prompt:l,historyLength:m,enableHelp:p,commands:u},{commandContainer:g,input:h,inputContainer:y}=((n,e)=>{n.className="terminal";const s=t("div","terminal-container"),o=t("div","terminal-type"),i=t("span",void 0,e),r=t("input");return r.setAttribute("type","text"),o.append(i),o.append(r),n.append(s),n.append(o),n.addEventListener("click",(()=>r.focus())),{commandContainer:s,input:r,inputContainer:o}})(n,l),f={history:[],lastHistoryIndex:0,isProcessRunning:!1,settings:d,commandContainer:g,inputContainer:y,input:h,print:(n,e=!1)=>((n,e,s,o,i)=>{const r=t("p",void 0,e?i:n);if(e){const e=t("span","termainal-command",n);r.append(e)}s.append(r),o.scrollIntoView()})(n,e,g,h,l),run:t=>i(t,f),start:()=>r(f),stop:()=>a(f),type:(n,e=60,s)=>((n,e,s,o)=>{r(s);const i=t("p");s.commandContainer.append(i);let c=0;const l=()=>{c<n.length&&s.isProcessRunning?(i.innerHTML+=n.charAt(c),c++,setTimeout(l,e)):(o&&o(),a(s))};setTimeout(l,e)})(n,e,f,s)};return p&&(f.settings.commands.help=(t=>({name:"help",description:"shows a full list of all available commands",func:({print:n})=>{for(const e in t.settings.commands)Object.hasOwnProperty.call(t.settings.commands,e)&&n(t.settings.commands[e].name+" - "+t.settings.commands[e].description)}}))(f)),((t,n)=>{const{input:s,print:r}=n;t.addEventListener("keyup",(({key:l,ctrlKey:m})=>{if(m&&"c"===l&&n.isProcessRunning)r("^C"),a(n),o(e.ON_PROCESS_INTERRUPT,t);else{if(n.isProcessRunning)return;if("Enter"===l)return n.lastHistoryIndex=0,s.value.length>0?(r(s.value,!0),(t=>{const{input:{value:n},history:e,settings:{historyLength:s}}=t;n!==e[0]&&(e.length>=s?t.history=[n,...e.slice(0,-1)]:(t.history=[n,...e],t.lastHistoryIndex=0))})(n),i(s.value,n)):r(" ",!0),void(s.value="");if("ArrowUp"===l)return void c(n);"ArrowDown"===l&&c(n,!0)}}))})(n,f),o(e.ON_INIT,n),s&&f.print(s),f})({host:document.querySelector("#terminal"),welcomeMessage:`Welcome to ttty @ ${navigator.userAgent}<br/><br/>\n     * Documentation:  <a href="https://github.com/mkrl/ttty/blob/master/README.md" target="_blank">https://github.com/mkrl/ttty</a><br/><br/>`,prompt:"ttty:~$ ",commands:{echo:{name:"echo",description:"a test command with one echo arg",argDescriptions:["a string to be echoed in console"],func:({print:t},n)=>{t(n)}},test:{name:"test",description:"A test command with no args that just prints some text",func:({type:t})=>{t("foo")}},multiply:{name:"multiply",description:"multiply two numbers",argDescriptions:["number one","number two"],func:({print:t},n,e)=>{t(String(Number(n)*Number(e)))}},start:{name:"start",description:"starts doing something for a certain period of time",func:t=>{t.print("Downloading more RAM..."),t.print("Press Ctrl + C if you think you have enough RAM"),t.type("............................................",160,(()=>{t.isProcessRunning&&t.print("Successfully downloaded 42gb of RAM!")}))}}}});null==l||l.addEventListener("click",(({target:t})=>{var n;if(Object.keys(null==t?void 0:t.dataset).length>0&&t){const e=null==(n=t.dataset)?void 0:n.exec;m.print(e,!0),m.run(e)}})),m.input.focus(),window.terminal=m;
